{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Feedback</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href={% static 'css/style.css' %}>


    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <!-- Variables for js from django -->




    <!-- <script src={% static 'js/graph.js' %}></script> -->
</head>

<body>
    <nav class="navbar navbar-dark bg-primary">
        <!-- Navbar content -->
        <!-- <h1>KPRIET</h1> -->
        <a class="navbar-brand" href="#">&nbsp; &nbsp;&nbsp;KPR Institute of Engineering and Technology</a>
    </nav>
    <br>
    <br>
    <div class="container">
        <div class="row">
            <div class="col-sm">
                <div class="col-table">
                    <table>
                        <tr>
                            <th>Name</th>
                            <th>score</th>
                        </tr>
                        {% for score, trainer in table_zip %}
                        <tr>
                            <td>{{ trainer.name }}</td>
                            <td>{{ score }}</td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>

            <div class="col-6">
                <div class="col-graph">
                    <!-- <canvas id="bar-Graph"></canvas> -->
                    <canvas id="graph"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!-- <script src="./graph.js"></script> -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script>
        console.log("{{ trainer_list_json }}")
        var trainer_list = JSON.parse('{{ trainer_list_json|safe }}');
        var score_list = JSON.parse('{{ average_score_json|safe }}');

        console.log(trainer_list)

        var nameArr = []

        for (var i = 0; i < trainer_list.length; i++) {
            nameArr.push(trainer_list[i].name)
        }
        console.log(nameArr)
        console.log(score_list);

        var canvas = document.getElementById("graph");
        var data = {
            labels: nameArr,
            datasets: [{
                label: "Sales",
                data: score_list,
                backgroundColor: "rgba(75,192,192,0.4)",
                borderColor: "rgba(75,192,192,1)"
            }]
        };



        // Set the options for the graph
        var options = {
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        min: 0,
                        max: 20,
                        stepSize: 1,
                        callback: function (value, index, values) {
                            if (Math.floor(value) === value) {
                                return value;
                            }
                        }
                    }
                }
            }
        };

        // Create the bar chart
        var barChart = new Chart(canvas, {
            type: 'bar',  //change the type to bar
            data: data,
            options: options
        });


    </script>

</body>

</html>